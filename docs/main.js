parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"cscv":[function(require,module,exports) {
var define;
var t;!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof t&&t.amd?t(i):(e=e||self).Swiper=i()}(this,function(){"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}function e(t,e){void 0===e&&(e=[]),Array.isArray(e)||(e=[e]),e.forEach(function(e){return!t.classList.contains(e)&&t.classList.add(e)})}function i(t,e){void 0===e&&(e=[]),Array.isArray(e)||(e=[e]),e.forEach(function(e){return t.classList.contains(e)&&t.classList.remove(e)})}function s(t,e){var i,s=getComputedStyle(t).transform.replace(/[a-z]|\(|\)|\s/g,"").split(",").map(parseFloat);return 16===s.length?i=s.slice(12,14):6===s.length&&(i=s.slice(4,6)),i[e?0:1]||0}var n=["INPUT","SELECT","OPTION","TEXTAREA","BUTTON","VIDEO"];return function(){function o(t,e){e=o.formatConfig(e),this.index=0,this.scrolling=!1,this.config=e,this.supportTouch=Boolean("ontouchstart"in window||0<window.navigator.maxTouchPoints||0<window.navigator.msMaxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch),"string"==typeof t&&(t=document.body.querySelector(t)),this.$el=t,this.$wrapper=t.querySelector("."+e.wrapperClass),this.eventHub={},this.initPlugins(e.plugins),this.emit("before-init",this),this.initListener(),this.initTouchStatus(),this.initWheelStatus(),this.update(),this.attachListener(),this.emit("after-init",this),this.scroll(e.initialSlide)}var r=o.prototype;return r.initPlugins=function(t){var e=this;(t||[]).forEach(function(t){return t(e)})},r.on=function(t,e){var i=this.eventHub;i[t]?i[t].push(e):i[t]=[e]},r.off=function(t,e){var i=this.eventHub;if(i[t]){var s=i[t].indexOf(e);-1<s&&i[t].splice(s,1)}},r.emit=function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var n=this.eventHub;n[t]&&n[t].forEach(function(t){return t.apply(void 0,i)})},r.initListener=function(){var t=this,e=this.$wrapper,i=this.config,o=this.supportTouch;this.listeners={handleTouchStart:function(r){for(var a=0;a<i.excludeElements.length;a++)if(i.excludeElements[a].contains(r.target))return;t.initTouchStatus();var h=t.touchStatus,l=i.touchStartPreventDefault&&-1===n.indexOf(r.target.nodeName)||i.touchStartForcePreventDefault;h.startOffset=s(e,t.isHorizontal),t.transform(h.startOffset),e.style.transition="none",h.isTouchStart=!0,h.touchStartTime=Date.now(),h.touchTracks.push({x:o?r.touches[0].pageX:r.pageX,y:o?r.touches[0].pageY:r.pageY}),l&&!i.passiveListeners&&r.preventDefault()},handleTouchMove:function(e){var s=t.touchStatus,n=s.touchTracks;if(s.isTouchStart&&!s.isScrolling){i.touchMoveStopPropagation&&e.stopPropagation();var r={x:o?e.touches[0].pageX:e.pageX,y:o?e.touches[0].pageY:e.pageY},a={x:r.x-n[n.length-1].x,y:r.y-n[n.length-1].y};n.push(r);var h=180*Math.atan2(Math.abs(a.y),Math.abs(a.x))/Math.PI,l=0;t.isHorizontal?h<i.touchAngle||s.isTouching?(s.isTouching=!0,l=a.x,e.preventDefault()):s.isScrolling=!0:90-h<i.touchAngle||s.isTouching?(s.isTouching=!0,l=a.y,e.preventDefault()):s.isScrolling=!0,t.scrollPixel(l*i.touchRatio)}},handleTouchEnd:function(n){if(t.touchStatus.isTouchStart){var o=t.index,r=t.slideSize,a=t.touchStatus,h=Date.now()-a.touchStartTime,l=s(e,t.isHorizontal)-a.startOffset;e.style.transition="transform ease "+i.speed+"ms",h>t.config.longSwipesMs?Math.abs(l)>=r*i.longSwipesRatio?t.scroll(0<l?o-1:o+1,!0):t.scroll(o,!0):0==l?t.scroll(o,!0):t.scroll(0<l?o-1:o+1,!0),t.initTouchStatus()}},handleWheel:function(e){var s=t.index,n=t.wheelStatus,o=e.deltaY;(0<Math.abs(o)-Math.abs(n.wheelDelta)||!n.wheeling)&&Math.abs(o)>=i.mousewheel.sensitivity&&t.scroll(0<o?s-1:s+1),n.wheelDelta=o,clearTimeout(n.wheelingTimer),n.wheeling=!0,n.wheelingTimer=setTimeout(function(){t.initWheelStatus()},200),e.preventDefault(),e.stopPropagation()}}},r.attachListener=function(){var t=this.$el,e=this.config,i=this.supportTouch,s=this.listeners,n=s.handleTouchStart,o=s.handleTouchMove,r=s.handleTouchEnd,a=s.handleWheel;i?(t.addEventListener("touchstart",n,{passive:e.passiveListeners,capture:!1},!1),t.addEventListener("touchmove",o),t.addEventListener("touchend",r),t.addEventListener("touchcancel",r)):(t.addEventListener("mousedown",n),document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)),e.mousewheel&&t.addEventListener("wheel",a)},r.detachListener=function(){var t=this.$el,e=this.listeners,i=e.handleTouchStart,s=e.handleTouchMove,n=e.handleTouchEnd,o=e.handleWheel;t.removeEventListener("touchstart",i),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",n),t.removeEventListener("touchcancel",n),t.removeEventListener("mousedown",i),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n),t.removeEventListener("wheel",o)},o.formatConfig=function(e){return void 0===e&&(e={}),e.mousewheel&&(e.mousewheel=t({invert:!1,sensitivity:1},e.mousewheel)),t({},{direction:"horizontal",touchRatio:1,touchAngle:45,longSwipesRatio:.5,initialSlide:0,loop:!1,mousewheel:!1,pagination:!1,passiveListeners:!0,resistance:!0,resistanceRatio:.85,speed:300,longSwipesMs:300,intermittent:0,spaceBetween:0,slidePrevClass:"swiper-slide-prev",slideNextClass:"swiper-slide-next",slideActiveClass:"swiper-slide-active",slideClass:"swiper-slide",wrapperClass:"swiper-wrapper",touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchMoveStopPropagation:!1,excludeElements:[]},{},e)},r.transform=function(t){this.$wrapper.style.transform=this.isHorizontal?"translate3d("+t+"px, 0, 0)":"translate3d(0, "+t+"px, 0)"},r.scroll=function(t,s){var n=this;if(void 0===t&&(t=0),void 0===s&&(s=!1),!this.scrolling||s){this.emit("before-slide",this.index,this);var o=this.config,r=this.minIndex,a=this.maxIndex,h=(t=t<r?r:a<t?a:t)*this.boxSize;this.scrolling=!0,this.transform(-h);var l=this.$list[t],c=this.$list[t-1],u=this.$list[t+1];l&&(e(l,o.slideActiveClass),i(l,[o.slidePrevClass,o.slideNextClass])),c&&(e(c,o.slidePrevClass),i(c,[o.slideActiveClass,o.slideNextClass])),u&&(e(u,o.slideNextClass),i(u,[o.slideActiveClass,o.slidePrevClass])),this.index=t,setTimeout(function(){n.scrolling=!1,n.emit("after-slide",t,n)},this.config.speed+this.config.intermittent)}},r.scrollPixel=function(t){var e=t.toExponential().split("e")[1],i=e<=0?Math.pow(10,-(e-1)):1;this.config.resistance&&(0<t&&0===this.index?t-=Math.pow(t*i,this.config.resistanceRatio)/i:t<0&&this.index===this.maxIndex&&(t+=Math.pow(-t*i,this.config.resistanceRatio)/i));var n=s(this.$wrapper,this.isHorizontal);this.transform(n+t)},r.initTouchStatus=function(){this.touchStatus={touchTracks:[],startOffset:0,touchStartTime:0,isTouchStart:!1,isScrolling:!1,isTouching:!1}},r.initWheelStatus=function(){this.wheelStatus={wheeling:!1,wheelDelta:0,wheelingTimer:!1}},r.update=function(){var t=this,e=this.$el,i=this.$wrapper,s=this.index,n=this.config,o=i.style,r="horizontal"===n.direction;this.isHorizontal=r,this.$list=[].slice.call(e.getElementsByClassName(n.slideClass)),this.minIndex=0,this.maxIndex=this.$list.length-1,this.slideSize=r?e.offsetWidth:e.offsetHeight,this.boxSize=this.slideSize+n.spaceBetween,this.$list.forEach(function(e){e.style[r?"width":"height"]=t.slideSize+"px",e.style[r?"margin-right":"margin-bottom"]=n.spaceBetween+"px"}),e.style.overflow="hidden",o.willChange="transform",o.transition="transform ease "+this.config.speed+"ms",o[r?"width":"height"]=this.boxSize*this.$list.length+"px",o.display="flex",o.flexDirection=r?"row":"column",this.transform(-s*this.boxSize)},r.destroy=function(){var t=this.$el,e=this.$wrapper,s=this.config.slideActiveClass;this.emit("before-destroy",this),this.$list.forEach(function(t){t.removeAttribute("style"),i(t,[s])}),e.removeAttribute("style"),t.removeAttribute("style"),this.detachListener(),this.emit("after-destroy",this),this.$el=null,this.$list=[],this.$wrapper=null,this.eventHub={},this.config=o.formatConfig()},o}()});
},{}],"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"WEtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},e=r;exports.default=e;
},{}],"v9Q8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}],e=null;function n(t,e){var n=document.getElementsByTagName("script")[0],a=document.createElement("script");return a.src=t,a.async=!0,n.parentNode.insertBefore(a,n),e&&"function"==typeof e&&(a.onload=e),a}function a(e){var n=new XMLHttpRequest,a=Date.now(),o="https://pudding.cool/assets/data/stories.json?v=".concat(a);n.open("GET",o,!0),n.onload=function(){if(n.status>=200&&n.status<400){var a=JSON.parse(n.responseText);e(a)}else e(t)},n.onerror=function(){return e(t)},n.send()}function o(t){return"\n\t<a class='footer-recirc__article' href='https://pudding.cool/".concat(t.url,"' target='_blank'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/").concat(t.image,".jpg' alt='").concat(t.hed,"'>\n\t\t<p class='article__headline'>").concat(t.hed,"</p>\n\t</a>\n\t")}function r(){var t=window.location.href,n=e.filter(function(e){return!t.includes(e.url)}).slice(0,4).map(o).join("");d3.select(".pudding-footer .footer-recirc__articles").html(n)}function s(){a(function(t){e=t,r()})}var c={init:s};exports.default=c;
},{}],"xZJw":[function(require,module,exports) {
"use strict";function t(t){return new Promise(function(e,n){var r=t.split(".").pop();"csv"===r?d3.csv("assets/data/".concat(t)).then(e).catch(n):"json"===r?d3.json("assets/data/".concat(t)).then(e).catch(n):n(new Error("unsupported file type for: ".concat(t)))})}function e(e){if("string"==typeof e)return t(e);var n=e.map(t);return Promise.all(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"X1gf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./load-data"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=d3.select('[data-js="category"'),c=o.select('[data-js="category__graphic"'),i=c.select('[data-js="graphic__figure"'),u=["Copywriting","Incorrect Statement","Low-quality Product","Inappropriate Animal Care"];function s(){}function l(e){var t=e.filter(function(e){return"FALSE"===e.remove_flag}).map(function(e){return n({},e,{cat:u.includes(e.controversy_type)?"Miscellaneous":e.controversy_type})}),r=d3.nest().key(function(e){return e.cat}).entries(t).map(function(e){return n({},e,{values:e.values.concat([{name:e.key,label:!0}])})});r.sort(function(e,t){return d3.descending(e.values.length,t.values.length)}),i.selectAll(".controversy").data(r).join("div").attr("class","controversy").selectAll(".person").data(function(e){return e.values}).join("div").attr("class",function(e){return"person ".concat(e.label?"is-label":""," ").concat(e.beauty?"is-beauty":"")}).append("p").text(function(e){return e.name})}function p(e){i.selectAll(".is-beauty").classed("is-active","beauty"===e)}function f(){(0,e.default)("people.csv").then(l)}var d={init:f,resize:s,slide:p};exports.default=d;
},{"./load-data":"xZJw"}],"ppRm":[function(require,module,exports) {
function t(t){return a(t)||e(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function e(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}d3.selection.prototype.puddingChartLine=function(n){var e=this.nodes().map(function(e){var a=d3.select(e),r=null,o=null,i=null,c=n.extentY,s=n.label,u=n.comp,l=a.datum(),d=!1,f=0,p=0,x=[],g=s.includes("Apology"),m=u.includes("Apology"),y=0,h=0,v=d3.easeCubicInOut,b=d3.scaleLinear(),A=d3.scaleLog().domain(c);function k(t){var n=t.append("g").attr("class",function(t){var n=t.beauty?"is-beauty":"",e="cluster--".concat(t.cluster);return"person ".concat(e," ").concat(n)}).attr("data-name",function(t){return t.name});return n.append("path"),n.append("text").text(function(t){return t.name}),n}var z={init:function(){r=a.append("svg").attr("class","pudding-chart"),i=r.append("g").attr("class","g-vis"),(o=r.append("g").attr("class","g-axis")).append("g").attr("class","axis--y"),o.append("text").attr("class","text-comp text-comp--bg").text(u).attr("x",6).attr("y",-6).attr("text-anchor",m?"start":"end").style("font-size",12),o.append("text").attr("class","text-comp text-comp--fg").text(u).attr("x",6).attr("y",-6).attr("text-anchor",m?"start":"end").style("font-size",12),o.append("text").attr("class","text-label").text(s).attr("x",0).attr("y",-6).attr("text-anchor",g?"end":"start").style("font-size",12),o.append("line")},resize:function(){var t=a.node().offsetWidth,n=a.node().offsetHeight;return y=t*(d?f:1)-32-32,h=n-16-16,b.range([0,y]),A.range([h,0]),r.style("margin-left",d3.format("%")(p)),z},render:function(){var n,e=(n=[]).concat.apply(n,t(l.map(function(t){return t.values}))).map(function(t){return t.days}),a=d3.extent(e);b.domain(a),r.transition().duration(500).ease(v).attr("width",y+32+32).attr("height",h+16+16);var c=g?d3.axisLeft(A):d3.axisRight(A);c.tickValues([.5,1,2]).tickSize(m?-y:y).tickFormat(function(t){return"".concat(t,"x")}),o.select(".axis--y").transition().duration(500).ease(v).call(c),o.transition().duration(500).ease(v).attr("transform","translate(".concat(32,", ").concat(16,")")),i.transition().duration(500).ease(v).attr("transform","translate(".concat(32,", ").concat(16,")")),o.selectAll(".text-comp").transition().duration(500).ease(v).attr("transform","translate(".concat(m?0:y,", ").concat(A(1),")")),o.select(".text-label").transition().duration(500).ease(v).attr("transform","translate(".concat(g?y:0,", ").concat(h,")"));var s=d3.line().x(function(t){return b(t.days)}).y(function(t){return A(t.value)}),u=i.selectAll(".person").data(l,function(t){return t.key}).join(k);return u.classed("is-focus",function(t){return x.includes(t.name)}),u.select("path").datum(function(t){return t.values}).transition().duration(500).ease(v).attr("d",s),z},data:function(t){return arguments.length?(l=t,a.datum(l),z):l},getDayCount:function(){return d3.max(l,function(t){return t.values.length})},shrink:function(t){return d=t,z},fraction:function(t){return arguments.length?(f=t,z):f},offset:function(t){return arguments.length?(p=t,z):p},focus:function(t){return t?x.push(t):x=[],z}};return z.init(),z});return e.length>1?e:e.pop()};
},{}],"IClS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./load-data"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return o(e)||i(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}function o(e){if(Array.isArray(e))return e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}require("./pudding-chart/impact-line");var s=null,l=null,f=d3.select('[data-js="impact"'),p=f.select('[data-js="impact__graphic"'),d=p.select('[data-js="graphic__zone"'),y=p.select('[data-js="figure--pre"'),v=p.select('[data-js="figure--post"');function b(){var e=s.getDayCount(),t=l.getDayCount(),r=Math.floor(.2*e),n=e+t+r,i=e/n,o=t/n,u=r/n;s.fraction(i),l.fraction(o).offset(i+u),d.style("width",d3.format("%")(u)).style("left",d3.format("%")(i))}function m(){b()}function g(e){var t=["pre-setup","pre-result","pre-example","post-setup"].includes(e);v.classed("is-visible",!t),d.classed("is-visible",!t),s.shrink("post-result"===e);var r=["pre-exmaple","post-result"].includes(e);"pre-example"===e?s.focus("Jake Paul").render():s.focus().render(),r&&s.resize().render()}function h(e,t){var r=t?-1:1,n=t?"pre":"post";return e.map(function(e){return a({},e,{days:+e.days*r,value:+e.value,side:n})})}function j(e){var t=r(e,3),n=t[0],i=t[1],o=t[2],u=n.filter(function(e){return"FALSE"===e.remove_flag}),c=h(i,!0),f=h(o,!1),p=c.concat(f),d=d3.extent(p,function(e){return e.value}),m=d3.nest().key(function(e){return e.id}).entries(c).map(function(e){return a({},e,{cluster:e.values[0].cluster},u.find(function(t){return t.id===e.key}))}).filter(function(e){return e.id}),g=d3.nest().key(function(e){return e.id}).entries(f).map(function(e){return a({},e,{cluster:e.values[0].cluster},u.find(function(t){return t.id===e.key}))}).filter(function(e){return e.id});s=y.datum(m).puddingChartLine({extentY:d,label:"90 Days Until Controversy",comp:"Pre-Controversy Max"}),l=v.datum(g).puddingChartLine({extentY:d,label:"180 Days Since Apology",comp:"Pre-Apology Max"}),b(),s.resize().render(),l.shrink(!0).resize().render()}function O(){(0,e.default)(["people.csv","pre.csv","post.csv"]).then(j)}var P={init:O,resize:m,slide:g};exports.default=P;
},{"./load-data":"xZJw","./pudding-chart/impact-line":"ppRm"}],"oJIz":[function(require,module,exports) {
d3.selection.prototype.puddingChartBeeswarm=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=0,a=0,c=0,u=d3.forceSimulation(n),i=d3.scaleLinear(),o=null,s=null,l=null,f=null,d={init:function(){o=e.append("svg").attr("class","pudding-chart"),s=e.append("div").attr("class","bees"),(f=o.append("g").attr("class","g-axis")).append("line").attr("class","axis")},resize:function(){return r=e.node().offsetWidth-0-0,a=e.node().offsetHeight-0-0,c=.25*a,e.style("height","".concat(a,"px")),o.attr("width",r+0+0).attr("height",a+0+0),f.select(".axis").transition().attr("y1",a/2).attr("y2",a/2).attr("x1",0).attr("x2",0+r),i.range([0,r+0]),u.force("y-pos",d3.forceY(a/2).strength(function(t){return t.beauty?1:.5})).force("x-pos",d3.forceX(function(t){return i(t.display)}).strength(function(t){return t.beauty?1:.5})).force("collide",d3.forceCollide(function(t){return t.beauty?c/2:c/8})),d},render:function(){return l=s.selectAll(".bee").data(n,function(t){return t.name}).join("div").attr("class",function(t){return"bee ".concat(t.beauty?"is-beauty":"")}).attr("data-js",function(t){return"bee--".concat(t.name.replace(/\s/g,""))}).style("background-image",function(t){return t.beauty?'url("assets/images/'.concat(t.name.replace(/\s/g,""),'.png")'):""}).style("width",function(t){return"".concat(t.beauty?c:c/4,"px")}).style("height",function(t){return"".concat(t.beauty?c:c/4,"px")}).style("background-size","".concat(1.15*c,"px")).style("top",function(t){return t.beauty?a/2:0}).style("left",function(t){return t.beauty?i(t.display):0}),u.alpha(.4).on("tick",function(){l.style("left",function(t){return"".concat(t.x,"px")}).style("top",function(t){return"".concat(t.y,"px")})}).restart(),d},getBees:function(){return l}};return d.init(),d});return e.length>1?e:e.pop()};
},{}],"F0i1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./load-data"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach(function(t){n(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}require("./pudding-chart/beeswarm");var i=d3.select('[data-js="beeswarm"]'),s=i.select('[data-js="beeswarm__graphic"]'),o=s.selectAll('[data-js="graphic__figure"]'),c=s.selectAll('[data-js="graphic__chart"]'),u=[];function l(){var e=d3.select('[data-type="text"] .slide__text').node().offsetHeight,t=Math.floor((i.node().offsetHeight-e)/c.size());c.style("height","".concat(t,"px")),u.forEach(function(e){e.resize().render()})}function d(e){return e.map(function(e){return a({},e,{beauty:"TRUE"===e.beauty})}).filter(function(e){return"NA"!==e.value})}function f(){var t=d3.select(this),r=t.attr("data-id"),a="beeswarm--".concat(r,".csv");(0,e.default)(a).then(d).then(function(e){var r=t.datum(e).puddingChartBeeswarm();r.resize().render(),r.getBees().nodes().map(p),u.push(r)})}function p(e){d3.select(e).on("mouseover",b).on("mouseout",h)}function b(e){_(this),y(this,e)}function h(){d3.selectAll(".bee").transition().duration(250).ease(d3.easeCubicInOut).style("opacity",1),d3.selectAll('[data-js="beeswarm__hovertext"]').transition().duration(250).ease(d3.easeCubicInOut).style("opacity",0)}function y(e,t){var r=e.parentElement.parentElement,a=e.getBoundingClientRect(),n=d3.select("[data-id=beeswarm__hovertext_".concat(r.getAttribute("data-id")));n.style("left","".concat(a.x+a.width/2,"px")).style("top","".concat(a.y,"px")).transition().duration(250).ease(d3.easeCubicInOut).style("opacity",1),n.select('[data-js="beeswarm__hovertext__title"]').html(t.name),n.select('[data-js="beeswarm__hovertext__content"]').html(t.value)}function _(e){var t=d3.select(e).attr("data-js");d3.selectAll(".bee").transition().duration(250).ease(d3.easeCubicInOut).style("opacity",.25),d3.selectAll("[data-js=".concat(t,"]")).transition().duration(250).ease(d3.easeCubicInOut).style("opacity",1)}function m(){o.each(f),l()}var v={init:m,resize:l};exports.default=v;
},{"./load-data":"xZJw","./pudding-chart/beeswarm":"oJIz"}],"epB2":[function(require,module,exports) {
"use strict";var e=c(require("tiny-swiper")),i=c(require("lodash.debounce")),s=c(require("./utils/is-mobile")),t=c(require("./footer")),l=c(require("./graphic-category")),a=c(require("./graphic-impact")),d=c(require("./graphic-beeswarm"));function c(e){return e&&e.__esModule?e:{default:e}}var r=d3.select("body"),n=r.select(".graphics"),o=d3.selectAll('[data-js="slide"]'),u=d3.selectAll('[data-type="text"]'),f=d3.selectAll("section"),v=d3.select('[data-js="nerd-mode__button"]'),h=d3.selectAll('[data-js="slide__nerd"]'),p=d3.select('[data-js="arrow--left"]'),_=d3.select('[data-js="arrow--right"]'),b=o.size(),g=null;function w(){var e=d3.select(".slide--active").select('[data-js="slide__nerd"]');if(e.size()){var i=e.classed("is-visible");e.classed("is-visible",!i)}}function y(){var e=[];return u.each(function(i,s,t){var l=d3.select(t[s]).select(".slide__text");l.size()&&e.push(l.node().offsetHeight)}),Math.max.apply(Math,e)}function m(){g.update()}function x(){var e=y();n.style("height","".concat(window.innerHeight-e,"px")),u.select(".slide__text").style("height","".concat(e,"px"))}function j(){x(),l.default.resize(),a.default.resize(),d.default.resize(),m()}function k(){if(r.select("header").classed("is-sticky")){var e=r.select(".header__menu"),i=r.select(".header__toggle");i.on("click",function(){var s=e.classed("is-visible");e.classed("is-visible",!s),i.classed("is-visible",!s)})}}function q(){var i=0,s=d3.select('[data-js="swiper"]').node();(g=new e.default(s,{wrapperClass:"swiper__wrapper",slideClass:"slide",slideNextClass:"slide--next",slidePrevClass:"slide--prev",slideActiveClass:"slide--active"})).on("after-slide",function(e){h.classed("is-visible",!1),i=e;var s=o.filter(function(e,s){return s===i}),t=s.attr("data-slide"),d=s.attr("data-trigger"),c=!!s.attr("data-nerd");v.classed("is-visible",c),f.classed("is-visible",!1),d&&(d3.select('[data-js="'.concat(d,'"]')).classed("is-visible",!0),"category"===d&&l.default.slide(t),"impact"===d&&a.default.slide(t))});var t=function(e){e!==i&&(i=e,g.scroll(i)),p.classed("is-visible",i>0),_.classed("is-visible",i<b-1)};r.on("keydown",function(){var e=d3.event.keyCode,s=i;37===e?s-=1:39===e&&(s+=1),73===e&&g.scroll(7),66===e&&g.scroll(b-1),s=Math.max(0,Math.min(s,b-1)),t(s)}),h.classed("is-loaded",!0),p.on("click",function(){var e=i-1;e=Math.max(0,e),t(e)}),_.on("click",function(){var e=i+1;e=Math.min(e,b-1),t(e)})}function z(){v.on("click",w)}function M(){r.style("height",window.innerHeight-100),r.classed("is-mobile",s.default.any()),window.addEventListener("resize",(0,i.default)(j,150)),x(),l.default.init(),a.default.init(),d.default.init(),q(),m(),z(),t.default.init()}M();
},{"tiny-swiper":"cscv","lodash.debounce":"or4r","./utils/is-mobile":"WEtf","./footer":"v9Q8","./graphic-category":"X1gf","./graphic-impact":"IClS","./graphic-beeswarm":"F0i1"}]},{},["epB2"], null)